(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},57:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=(n(48),n(49),n(16)),i=n.n(s),o=n(7),u=n(9),l=n(2),j=(n(57),c.a.createContext());function d(e){var t=e.children,n=Object(r.useRef)(),c=Object(r.useState)(),s=Object(l.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){o(n.current)}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.Provider,{value:i,children:t}),Object(a.jsx)("div",{ref:n})]})}function b(e){var t=e.onClose,n=e.children,c=Object(r.useContext)(j);return c?i.a.createPortal(Object(a.jsxs)("div",{id:"modal",children:[Object(a.jsx)("div",{id:"modal-background",onClick:t}),Object(a.jsx)("div",{id:"modal-content",children:n})]}),c):null}var p=n(8),f=n(3),O=n.n(f),v=n(6),h=n(23),m=n.n(h),x=n(41),g=n.n(x);function _(e){return y.apply(this,arguments)}function y(){return(y=Object(v.a)(O.a.mark((function e(t){var n,a,r,c,s=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=s.length>1&&void 0!==s[1]?s[1]:{}).headers=n.headers||{},n.method=n.method||"GET","GET"!==n.method.toUpperCase()&&(n.headers["XSRF-TOKEN"]=g.a.get("XSRF-TOKEN"),n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json"),e.next=6,window.fetch(t,n);case 6:if(a=e.sent,!(r=a.headers.get("content-type"))||!r.includes("application/json")){e.next=13;break}return e.next=11,a.json();case 11:c=e.sent,a.data=c;case 13:if(!(a.status>=400)){e.next=15;break}throw a;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w="session/setUser",k="session/removeUser",N=function(e){return{type:w,payload:e}},C=function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r,c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.credential,r=e.password,"POST",c={credential:a,password:r},t.next=5,_("/api/session",{method:"POST",body:JSON.stringify(c)});case 5:return s=t.sent,n(N(s.data.user)),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S={user:null};var E=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case w:return(e=Object.assign({},t)).user=n.payload,e;case k:return(e=Object.assign({},t)).user=null,e;default:return t}},P=n(42),L=n(43);function T(){var e=Object(o.c)(),t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(o.d)((function(e){return e.session.user}));Object(r.useEffect)((function(){if(c){var e=function(){s(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}}),[c]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{onClick:function(e){c||s(!0)},className:"navbar__user-container",children:[Object(a.jsx)("div",{className:"navbar__user-container-dropdown",children:Object(a.jsx)("i",{className:"fas fa-caret-down"})}),i.profilePicURL&&Object(a.jsx)("img",{className:"navbar__profile-icon",src:i.profilePicURL,alt:""}),!i.profilePicURL&&Object(a.jsx)(P.a,{icon:L.a,className:"navbar__profile-icon"}),Object(a.jsxs)("div",{className:"navbar__profile-dropdown ".concat(c?"navbar__profile-dropdown--shown":"navbar__profile-dropdown--hidden"),children:[Object(a.jsxs)("div",{className:"navbar__dropdown-user-info",children:[Object(a.jsx)("div",{className:"navbar__dropdown-text",children:i.username}),Object(a.jsx)("div",{className:"navbar__dropdown-text",children:i.email})]}),Object(a.jsxs)("div",{className:"navbar__dropdown-links",children:[Object(a.jsx)(u.b,{className:"navbar__dropdown-link",to:"/new-event",children:"Create A New Event"}),Object(a.jsx)(u.b,{className:"navbar__dropdown-link",to:"/my-events",children:"My Events"}),Object(a.jsx)(u.b,{className:"navbar__dropdown-link",to:"/my-tickets",children:"My Tickets"}),Object(a.jsx)("div",{className:"navbar__dropdown-link",onClick:function(t){t.preventDefault(),e(function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("/api/session",{method:"DELETE"});case 2:e.sent,t({type:k});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log Out"})]})]})]})})}var R="view/setView",F="view/clearView",q=function(e){return function(t){return t({type:R,payload:e})}};function D(e){var t=e.searchValue,n=e.setSearchValue,c=Object(r.useRef)(null);return Object(r.useEffect)((function(){c.current.focus()}),[]),Object(a.jsx)("input",{ref:c,type:"text",placeholder:"Search for event titles",value:t,onChange:function(e){return n(e.target.value)}})}function U(){var e=Object(o.c)(),t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(l.a)(i,2),j=u[0],d=u[1];return Object(r.useEffect)((function(){e(q(j?"SEARCH:".concat(j):null))}),[j]),Object(r.useEffect)((function(){if(c){var e=function(e){s(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}}),[c]),Object(a.jsxs)("div",{onClick:function(e){e.stopPropagation(),d(""),c||s(!0)},className:"navbar__search ".concat(c?"navbar__search--open":"navbar__search--closed"),children:[Object(a.jsx)("i",{className:"fas fa-search"}),c&&Object(a.jsx)(D,{searchValue:j,setSearchValue:d})]})}n(78);function A(e){var t=e.name,n=e.type,c=e.value,s=e.onChange,i=e.required,o=Object(r.useState)(!1),u=Object(l.a)(o,2),j=u[0],d=u[1];return Object(a.jsxs)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation(),e.target.querySelector("input").focus()},className:"form-input__container",children:[Object(a.jsx)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation(),e.target.parentElement.querySelector("input").focus()},className:"form-input__name",children:t}),Object(a.jsx)("input",{onClick:function(e){return e.stopPropagation()},onFocus:function(e){if(e.stopPropagation(),!j){d(!0);var t=e.target.parentElement;t.classList.add("form-input__container--focused"),t.classList.add("form-input__container--filled")}},onBlur:function(e){d(!1);var t=e.target.parentElement;t.classList.remove("form-input__container--focused"),e.target.value||t.classList.remove("form-input__container--filled")},className:"form-input__input",type:n,value:c,onChange:s,required:i})]})}n(79);function z(){var e=Object(o.c)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(l.a)(i,2),j=u[0],d=u[1],b=Object(r.useState)([]),p=Object(l.a)(b,2),f=p[0],O=p[1];return Object(a.jsxs)("form",{className:"login-form",children:[Object(a.jsxs)("h2",{children:["Login to ",Object(a.jsx)("span",{style:{fontFamily:"'Pacifico', cursive"},children:"'SupDog"})]}),f.length>0&&Object(a.jsx)("ul",{children:f.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))}),Object(a.jsxs)("div",{className:"login-form__input-fields",children:[Object(a.jsx)(A,{name:"Email or Username",required:!0,type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}}),Object(a.jsx)(A,{name:"Password",required:!0,type:"password",value:j,onChange:function(e){var t=e.target;return d(t.value)}})]}),Object(a.jsx)("div",{className:"button button--primary",onClick:function(t){return t.preventDefault(),O([]),e(C({credential:c,password:j})).catch((function(e){e.data&&e.data.errors&&O(e.data.errors)}))},children:"Log In"})]})}function I(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"navbar__button",onClick:function(){c(!0)},children:"Log In"}),n&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b,{onClose:function(){return c(!1)},children:Object(a.jsx)(z,{})})})]})}n(30);var B=n(45),G=function(e){return new Promise((function(t,n){var a=new Image;a.addEventListener("load",(function(){return t(a)})),a.addEventListener("error",(function(e){return n(e)})),a.setAttribute("crossOrigin","anonymous"),a.src=e}))},M=function(){var e=Object(v.a)(O.a.mark((function e(t,n){var a,r,c,s,i,o=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:250,r=o.length>3&&void 0!==o[3]?o[3]:250,e.next=4,G(t);case 4:return c=e.sent,s=document.createElement("canvas"),i=s.getContext("2d"),s.width=a,s.height=r,i.drawImage(c,n.x,n.y,n.width,n.height,0,0,s.width,s.height),e.abrupt("return",new Promise((function(e){s.toBlob((function(t){e(t)}),"image/jpeg")})));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(e){var t=e.getBlob,n=e.inputImg,c=e.aspect,s=void 0===c?1:c,i=e.width,o=void 0===i?250:i,u=e.height,j=void 0===u?250:u,d=Object(r.useState)({x:0,y:0}),b=Object(l.a)(d,2),p=b[0],f=b[1],h=Object(r.useState)(1),m=Object(l.a)(h,2),x=m[0],g=m[1],_=function(){var e=Object(v.a)(O.a.mark((function e(a,r){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n,r,o,j);case 2:c=e.sent,t(c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"cropper",children:Object(a.jsx)(B.a,{image:n,crop:p,zoom:x,aspect:s,onCropChange:f,onCropComplete:_,onZoomChange:g})})},W=(n(80),function(e){var t=e.aspect,n=e.onChange,c=e.width,s=e.height,i=Object(r.useState)(null),o=Object(l.a)(i,2),u=(o[0],o[1]),j=Object(r.useState)(""),d=Object(l.a)(j,2),b=d[0],p=d[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.addEventListener("load",(function(){p(n.result)}),!1),t&&n.readAsDataURL(t)}}),Object(a.jsx)("div",{className:"image-cropper__container",children:Object(a.jsx)(V,{getBlob:function(e){u(e),n(e)},inputImg:b,aspect:t,width:c,height:s})})]})});n(81);function H(){var e=Object(o.c)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(l.a)(i,2),j=u[0],d=u[1],b=Object(r.useState)(""),f=Object(l.a)(b,2),h=f[0],x=f[1],g=Object(r.useState)(""),_=Object(l.a)(g,2),y=_[0],w=_[1],k=Object(r.useState)(""),C=Object(l.a)(k,2),S=C[0],E=C[1],P=Object(r.useState)(""),L=Object(l.a)(P,2),T=L[0],R=L[1],F=Object(r.useState)(null),q=Object(l.a)(F,2),D=q[0],U=q[1],z=Object(r.useState)([]),I=Object(l.a)(z,2),B=I[0],G=I[1],M=Object(r.useState)(!1),V=Object(l.a)(M,2),H=(V[0],V[1]);if(Object(o.d)((function(e){return e.session.user})))return Object(a.jsx)(p.a,{to:"/"});return Object(a.jsxs)("form",{className:"signup-form",children:[Object(a.jsxs)("h2",{children:["Sign Up for ",Object(a.jsx)("span",{style:{fontFamily:"'Pacifico', cursive"},children:"'SupDog"})]}),B.length>0&&Object(a.jsx)("ul",{children:B.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))}),Object(a.jsxs)("div",{className:"signup-form__inputs-container",children:[Object(a.jsxs)("div",{className:"signup-form__input-fields",children:[Object(a.jsx)(A,{name:"First Name",required:!0,type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}}),Object(a.jsx)(A,{name:"Last Name",required:!0,type:"text",value:j,onChange:function(e){var t=e.target;return d(t.value)}}),Object(a.jsx)(A,{name:"Email",required:!0,type:"text",value:h,onChange:function(e){var t=e.target;return x(t.value)}}),Object(a.jsx)(A,{name:"Username",required:!0,type:"text",value:y,onChange:function(e){var t=e.target;return w(t.value)}}),Object(a.jsx)(A,{name:"Password",required:!0,type:"password",value:S,onChange:function(e){var t=e.target;return E(t.value)}}),Object(a.jsx)(A,{name:"Confirm Password",required:!0,type:"password",value:T,onChange:function(e){var t=e.target;return R(t.value)}})]}),Object(a.jsxs)("div",{className:"signup-form__profile-pic",children:[Object(a.jsx)("h2",{children:"Select a Profile Picture"}),Object(a.jsx)("span",{children:"After selection image, drag to position and scroll to zoom."}),Object(a.jsx)(W,{aspect:1,onChange:U})]})]}),Object(a.jsx)("div",{className:"button button--primary",onClick:function(t){t.preventDefault(),G([]);var n=[];return T!==S?(n.push("Please make sure passwords match!"),G(n)):(H(!0),e(function(e){return function(){var t=Object(v.a)(O.a.mark((function t(n){var a,r,c,s,i,o,u,l;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.profilePic,r=e.firstName,c=e.lastName,s=e.username,i=e.password,o=e.email,(u=new FormData).append("firstName",r),u.append("lastName",c),u.append("username",s),u.append("password",i),u.append("email",o),a&&u.append("profilePic",a),l={headers:{"content-type":"multipart/form-data"}},t.abrupt("return",m.a.post("/api/users/",u,l).then((function(e){var t=e.data;return n(N(t))})).catch((function(e){return e.response})));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({email:h,username:y,firstName:c,lastName:j,profilePic:D,password:S})).then((function(e){if("OK"!==e.statusText)throw e;return e})).catch((function(e){e.data&&e.data.errors&&(G(e.data.errors),H(!1))})))},children:"Sign Up"})]})}function J(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"navbar__button navbar__button--primary",onClick:function(){c(!0)},children:"Sign Up"}),n&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b,{onClose:function(){return c(!1)},children:Object(a.jsx)(H,{})})})]})}n(82);function K(e){var t,n=e.isLoaded,r=Object(p.g)(),c=Object(o.c)();t=Object(o.d)((function(e){return e.session.user}))?Object(a.jsx)(T,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{onClick:function(e){return e.stopPropagation(),c(C({credential:"demo@user.io",password:"password"}))},className:"button",children:"Demo"}),Object(a.jsx)(I,{}),Object(a.jsx)(J,{})]});return Object(a.jsxs)("div",{className:"navbar__container",children:[Object(a.jsx)("div",{className:"navbar__logo",onClick:function(e){e.stopPropagation(),c(q(null)),r.push("/")},children:Object(a.jsx)("img",{src:"/images/'SupDog-Logo.png",alt:"",width:"150px"})}),Object(a.jsxs)("div",{className:"navbar__right-container",children:[Object(a.jsx)(U,{}),Object(a.jsx)("div",{className:"navbar__links",children:n&&t})]})]})}var Y=n(15),Q="events/addEvents",X="events/setEvents",Z="events/clearEvents",$=function(e){return{type:Q,payload:e}},ee=function(){return function(e){return e({type:Z})}},te=function(e,t,n){return function(){var a=Object(v.a)(O.a.mark((function a(r){var c,s,i,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n||!n.startsWith("CATEGORY:")){a.next=7;break}return s=n.slice(9),a.next=4,_("/api/categories/".concat(s,"?start=").concat(e,"&amoount=").concat(t));case 4:c=a.sent,a.next=17;break;case 7:if(!n||!n.startsWith("SEARCH:")){a.next=14;break}return i=encodeURI(n.slice(7)),a.next=11,_("/api/events/search?start=".concat(e,"&amount=").concat(t,"&search=").concat(i));case 11:c=a.sent,a.next=17;break;case 14:return a.next=16,_("/api/events?start=".concat(e,"&amount=").concat(t));case 16:c=a.sent;case 17:if(!((o=c.data.events)&&o.length>=1)){a.next=20;break}return a.abrupt("return",r($(o)));case 20:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ne=function(e){var t=e.title,n=e.summary,a=e.organizer,r=e.about,c=e.eventPic,s=e.tickets,i=new FormData;i.append("title",t),i.append("summary",n),i.append("organizer",a),i.append("tickets",s),r&&i.append("about",r),c&&i.append("eventPic",c);return m.a.post("/api/events/",i,{headers:{"content-type":"multipart/form-data"}}).catch((function(e){return e.response}))},ae=[];n(83);function re(e){var t=e.ticket;return Object(a.jsx)("li",{className:"event-card__background-ticket-item",children:t.name})}function ce(e){var t=e.event,n=Object(p.g)(),r=t.id,c=t.title,s=t.organizer,i=t.eventPicURL,o=t.summary,u=t.tickets,j=u.reduce((function(e,t){return e[1]+=t.quantity,e[0]+=t.quantity-t.sold,e}),[0,0]),d=Object(l.a)(j,2),b=d[0],f=d[1];return Object(a.jsxs)("div",{className:"event-card__wrapper",onClick:function(e){e.stopPropagation(),n.push("/events/".concat(r))},children:[Object(a.jsxs)("div",{className:"event-card__foreground",children:[Object(a.jsx)("div",{className:"event-card__picture-wrapper",children:Object(a.jsx)("img",{className:"event-card__picture",src:i,alt:""})}),Object(a.jsxs)("div",{className:"event-card__foreground-details",children:[Object(a.jsx)("h1",{className:"event-card__foreground-details-title",children:c}),Object(a.jsxs)("h2",{className:"event-card__foreground-details-organizer",children:["Hosted by:",Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{className:"event-card__organizer-pic",src:s.profilePicURL,alt:""}),Object(a.jsx)("span",{children:s.username})]})]}),Object(a.jsxs)("h2",{className:"event-card__foreground-details-ticket-count",children:[Object(a.jsx)("i",{className:"fas fa-ticket-alt"}),Object(a.jsx)("span",{children:"".concat(b," ")}),"out of",Object(a.jsx)("span",{children:" ".concat(f," ")}),"remaining"]})]})]}),Object(a.jsxs)("div",{className:"event-card__background",children:[Object(a.jsx)("img",{className:"event-card__background-image",src:i,alt:""}),Object(a.jsxs)("div",{className:"event-card__background-details",children:[Object(a.jsx)("h1",{className:"event-card__background-title",children:c}),Object(a.jsx)("h2",{className:"event-card__background-summary",children:o}),Object(a.jsxs)("ul",{className:"event-card__background-tickets",children:[Object(a.jsx)("span",{children:"Ticket Types:"}),u.map((function(e){return Object(a.jsx)(re,{ticket:e},e.id)}))]})]}),Object(a.jsx)("div",{className:"button button--primary",children:"SEE MORE"})]})]},"event-".concat(r))}n(84);function se(){return Object(a.jsxs)("div",{className:"footer__wrapper",children:[Object(a.jsx)("div",{className:"footer__image-wrapper",children:Object(a.jsx)(u.b,{to:"/",children:Object(a.jsx)("img",{src:"/images/Favicon-Logo.png",alt:""})})}),Object(a.jsxs)("div",{className:"footer__links",children:[Object(a.jsxs)("div",{className:"footer__links-left",children:[Object(a.jsx)("h1",{style:{fontWeight:"bold"},children:"References"}),Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://popdog.com/",children:"Popdog"}),Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.eventbrite.com/",children:"Eventbrite"})]}),Object(a.jsxs)("div",{className:"footer__links-right",children:[Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/sjstark/supdog",children:Object(a.jsx)("i",{className:"fab fa-github-square"})}),Object(a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.linkedin.com/in/samueljamesstark/",children:Object(a.jsx)("i",{className:"fab fa-linkedin"})})]})]})]})}n(85);var ie=Object(o.b)((function(e){return{events:e.events,view:e.view}}))((function(e){var t=e.events,n=e.view,c=(e.isLoading,Object(o.c)()),s=Object(r.useState)(!1),i=Object(l.a)(s,2),u=i[0],j=i[1],d=Object(r.useState)("All Events"),b=Object(l.a)(d,2),p=b[0],f=b[1],h=function(){var e=Object(v.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",f("All Events"));case 2:if(!t.startsWith("SEARCH:")){e.next=5;break}return n=t.slice(7),e.abrupt("return",f("Search for: ".concat(n)));case 5:if(!t.startsWith("CATEGORY:")){e.next=11;break}return a=t.slice(9),e.next=9,_("/api/categories/".concat(a,"/title"));case 9:return r=e.sent,e.abrupt("return",f("Category: ".concat(r.data)));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){Object(v.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!1),e.next=3,c(ee());case 3:return e.next=5,c(te(0,10,n));case 5:return e.next=7,h(n);case 7:j(!0);case 8:case"end":return e.stop()}}),e)})))()}),[n]);var m=function(){var e=Object(v.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),j(!1),e.next=4,c(te(t.length,10,n));case 4:j(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"event-display-container",children:[Object(a.jsx)("h1",{className:"event-display-title",children:p}),Object(a.jsx)("ul",{className:"event-display-list",children:u&&Object(a.jsxs)(a.Fragment,{children:[0===t.length&&Object(a.jsx)("div",{style:{height:"50vh"},children:" There are no events for this yet!"}),t&&t.map((function(e){return Object(a.jsx)(ce,{event:e},"event-".concat(e.id))}))]})}),u&&Object(a.jsxs)(a.Fragment,{children:[t.length>0&&Object(a.jsxs)("div",{className:"event-display__show-more-wrapper",children:[Object(a.jsx)("div",{className:"event-display__show-more-line"}),Object(a.jsx)("div",{className:"event-display__show-more-button-wrapper",children:Object(a.jsx)("div",{onClick:m,className:"button button--primary button--large",children:"Load More Events"})})]}),Object(a.jsx)(se,{})]})]})}));n(86);function oe(e){var t=e.ticket,n=e.getEvent,c=t.sold>=t.quantity;Object(r.useEffect)((function(){c=t.sold>=t.quantity}),[t]);var s=function(){var e=Object(v.a)(O.a.mark((function e(a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.stopPropagation(),a.target.onClick=null,a.target.classList.add("button--disabled"),e.next=5,_("/api/tickets/".concat(t.id),{method:"POST"});case 5:return(r=a.target.parentElement.querySelector(".success")).classList.add("shown"),setTimeout((function(){r.classList.remove("shown")}),100),a.target.classList.remove("button--disabled"),a.target.onClick=s,e.next=12,n();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"ticket-item__wrapper",children:[Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(a.jsx)("h2",{className:"ticket-item__name",children:t.name}),Object(a.jsxs)("h2",{className:"ticket-item__tickets-left",children:[t.quantity-t.sold," Left"]})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[!c&&Object(a.jsx)("div",{onClick:s,className:"button button--small button--primary",children:"Register"}),c&&Object(a.jsx)("div",{className:"button button--small button--disabled",children:"Sold Out"}),Object(a.jsx)("div",{className:"success",children:"Success!"})]})]})}n(87);function ue(){var e=Object(p.h)().id,t=Object(r.useState)(null),n=Object(l.a)(t,2),c=n[0],s=n[1],i=function(){var t=Object(v.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("/api/events/".concat(e));case 2:n=t.sent,s(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[e]),Object(a.jsx)(a.Fragment,{children:c&&Object(a.jsxs)("div",{className:"event-details__container",children:[Object(a.jsx)("div",{className:"event-details__background-container",children:Object(a.jsx)("div",{className:"event-details__background-image-container",children:Object(a.jsx)("img",{className:"event-details__background-image",src:c.eventPicURL,alt:""})})}),Object(a.jsxs)("div",{className:"event-details__content",children:[Object(a.jsxs)("div",{className:"event-details__header",children:[Object(a.jsx)("div",{className:"event-details__header-left",children:Object(a.jsx)("img",{className:"event-details__header-image",src:c.eventPicURL,alt:""})}),Object(a.jsxs)("div",{className:"event-details__header-right",children:[Object(a.jsx)("h1",{className:"event-detail__header-title",children:c.title}),Object(a.jsxs)("h1",{className:"event-detail__header-organizer",children:["by ",Object(a.jsx)("img",{className:"event-detail__header-organizer-pic",src:c.organizer.profilePicURL,alt:""}),c.organizer.username]})]})]}),Object(a.jsxs)("div",{className:"event-details__body",children:[Object(a.jsxs)("div",{className:"event-details__body-left",children:[Object(a.jsx)("span",{children:c.summary}),Object(a.jsx)("h3",{children:"About this Event"}),Object(a.jsx)("p",{children:c.about})]}),Object(a.jsxs)("div",{className:"event-details__body-right",children:[Object(a.jsx)("h1",{style:{fontSize:"24px"},children:"Tickets"}),c.tickets.map((function(e){return Object(a.jsx)(oe,{ticket:e,getEvent:i},e.id)}))]})]})]})]})})}function le(){var e=Object(p.g)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(""),u=Object(l.a)(i,2),j=u[0],d=u[1],b=Object(r.useState)(""),f=Object(l.a)(b,2),h=f[0],m=f[1],x=Object(r.useState)(null),g=Object(l.a)(x,2),_=g[0],y=g[1],w=Object(r.useState)([]),k=Object(l.a)(w,2),N=k[0],C=k[1],S=Object(r.useState)(""),E=Object(l.a)(S,2),P=E[0],L=E[1],T=Object(r.useState)(0),R=Object(l.a)(T,2),F=R[0],q=R[1],D=Object(r.useState)([]),U=Object(l.a)(D,2),A=U[0],z=U[1],I=Object(r.useState)(!1),B=Object(l.a)(I,2),G=B[0],M=B[1],V=Object(r.useState)(0),H=Object(l.a)(V,2),J=H[0],K=H[1],Q=Object(o.d)((function(e){return e.session.user}));if(!Q)return Object(a.jsx)(p.a,{to:"/"});var X=function(){var t=Object(v.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),M(!0),z([]),a={title:c,summary:j,about:h,eventPic:_,organizer:Q.id,tickets:JSON.stringify(N)},t.abrupt("return",ne(a).then((function(t){if("OK"!==t.statusText)throw t;e.push("/")})).catch((function(e){e.data&&e.data.errors&&(z(e.data.errors),M(!1))})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=Object(a.jsxs)("form",{className:"event-create-form",children:[Object(a.jsx)("ul",{children:A.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))}),Object(a.jsx)("div",{children:Object(a.jsxs)("label",{children:["Event Title:",Object(a.jsx)("input",{type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("label",{children:["Summary:",Object(a.jsx)("textarea",{rows:2,cols:50,value:j,onChange:function(e){var t=e.target;return d(t.value)}})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("label",{children:["About:",Object(a.jsx)("textarea",{value:h,rows:10,cols:50,onChange:function(e){var t=e.target;return m(t.value)}})]})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{children:["Event Picture:",Object(a.jsx)("span",{children:"2160px x 1080px (2:1 ratio)"})]}),Object(a.jsx)(W,{aspect:2,onChange:y,height:1080,width:2160})]}),Object(a.jsx)("button",{onClick:function(){return e.replace("/")},children:"Cancel Event Creation"}),!G&&Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),K(J+1)},children:"Next Step"}),G&&Object(a.jsx)("button",{disabled:!0,children:"Next Step"})]}),$=[Z,Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("form",{onSubmit:X,className:"ticket-create-form",children:[Object(a.jsx)("ul",{children:A.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))}),Object(a.jsx)("div",{children:Object(a.jsxs)("label",{children:["Ticket Title:",Object(a.jsx)("input",{type:"text",value:P,onChange:function(e){var t=e.target;return L(t.value)}})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)("label",{children:["Quantity Available:",Object(a.jsx)("input",{type:"number",value:F,onChange:function(e){var t=e.target;return q(t.value)}})]})}),Object(a.jsx)("button",{onClick:function(){return e.replace("/")},children:"Cancel Event Creation"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),K(J-1)},children:"Go Back"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation();var t={name:P,quantity:F};C([].concat(Object(Y.a)(N),[t])),L(""),q(0)},children:"Create Current Ticket"}),N.length>=1&&Object(a.jsx)("button",{type:"submit",children:"Create Event"}),!(N.length>=1)&&Object(a.jsx)("button",{disabled:!0,type:"submit",children:"Create Event"})]}),Object(a.jsx)("ul",{children:N&&N.map((function(e,t){return Object(a.jsxs)("li",{children:[Object(a.jsxs)("span",{children:["Ticket Type: ",e.name," "]}),Object(a.jsxs)("span",{children:["Quanitity: ",e.quantity]}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),function(e){C([].concat(Object(Y.a)(N.slice(0,e)),Object(Y.a)(N.slice(e+1))))}(t)},children:"Remove Ticket"})]},e.name)}))})]})];return Object(a.jsx)(a.Fragment,{children:$[J]})}n(88);var je=function(e){var t=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(e),n={};for(var a in t){var r=t[a];r/=255,n[a]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*n.r+.7152*n.g+.0722*n.b>.179?"#000000":"#ffffff"};function de(e){var t=e.id,n=e.icon,r=e.title,c=e.color,s=Object(o.c)(),i=Object(p.g)(),u=je(c);return Object(a.jsxs)("div",{className:"category-bar__category-wrapper",onClick:function(e){e.stopPropagation(),s(q("CATEGORY:".concat(t))),i.push("/")},children:[Object(a.jsx)("div",{className:"category-bar__category-bubble",style:{backgroundColor:c},children:Object(a.jsx)("i",{className:n,style:{color:u}})}),Object(a.jsx)("span",{className:"category-bar__category-title",children:r})]})}function be(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){Object(v.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("/api/categories");case 2:t=e.sent,n=t.data,c(n),u(!0);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(a.jsxs)("div",{className:"category-bar",children:[Object(a.jsx)("h3",{className:"category-bar__title",children:"Categories"}),Object(a.jsx)("div",{className:"category-bar__categories",children:o&&n.map((function(e){return Object(a.jsx)(de,{id:e.id,icon:e.icon,title:e.title,color:e.color},"category-".concat(e.id))}))})]})}var pe,fe=function(){var e=Object(o.c)(),t=Object(r.useState)(null),n=Object(l.a)(t,2),c=(n[0],n[1],Object(r.useState)(!1)),s=Object(l.a)(c,2),i=s[0],u=s[1];return Object(r.useEffect)((function(){e(function(){var e=Object(v.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("/api/session");case 2:return n=e.sent,t(N(n.data.user)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return e(te(0,10))})).then((function(){return u(!0)}))}),[e]),Object(a.jsxs)("div",{className:"main-wrapper",children:[Object(a.jsx)(K,{isLoaded:i}),Object(a.jsx)(be,{isLoaded:i}),Object(a.jsx)("div",{className:"main-content-wrapper",children:i&&Object(a.jsxs)(p.d,{children:[Object(a.jsxs)(p.b,{path:"/events/:id",children:[" ",Object(a.jsx)(ue,{})]}),Object(a.jsxs)(p.b,{path:"/new-event",children:[" ",Object(a.jsx)(le,{})," "]}),Object(a.jsx)(p.b,{path:"/my-tickets"}),Object(a.jsx)(p.b,{path:"/",render:function(){return Object(a.jsx)(ie,{})}})]})})]})},Oe=n(17),ve=n(44),he=Object(Oe.c)({session:E,events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case X:return Object(Y.a)(a);case Q:return[].concat(Object(Y.a)(e),Object(Y.a)(a));case Z:return[];default:return e}},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case R:return a;case F:return null;default:return e}}});pe=Object(Oe.a)(ve.a);var me=function(e){return Object(Oe.d)(he,e,pe)}();function xe(){return Object(a.jsx)(o.a,{store:me,children:Object(a.jsx)(u.a,{children:Object(a.jsx)(d,{children:Object(a.jsx)(fe,{})})})})}i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(xe,{})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.49ed1904.chunk.js.map